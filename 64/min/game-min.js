var cloud=function(t,o,e){this.x=t,this.y=o,this.velocity=e};cloud.prototype=new Studio.SpriteAnimation({borderlap:1,border:stage,width:16,height:8,x:32,y:16,image:sheet_64,rect:{x:0,y:0,width:16,height:8},loop:sheet_motion.cloud,fps:44}),cloud.prototype.onEnterFrame=function(){this.x-=this.velocity,this.x<0&&(this.x=stage.width)},splosion=function(t,o){this.x=t,this.y=o},splosion.prototype=new Studio.SpriteAnimation({width:16,height:8,x:0,y:60,image:sheet_64,rect:{x:0,y:0,width:16,height:8},loop:sheet_motion.splode,fps:12}),splosion.prototype.constructor=splosion,splosion.prototype.onLoopComplete=function(){this.frame=0,Game.removeChild(this),this.intoPool()},Studio.createPool(splosion),splosionME=function(t,o){this.x=t,this.y=o},splosionME.prototype=new Studio.SpriteAnimation({width:16,height:16,velocityX:0,velocityY:1,image:sheet_64,rect:{x:0,y:0,width:16,height:16},loop:sheet_motion.splodeME,fps:12}),splosionME.prototype.constructor=splosionME,splosionME.prototype.onEnterFrame=function(){this.y+=this.velocityY,this.x+=this.velocityX},splosionME.prototype.onLoopComplete=function(){this.frame=0,Game.removeChild(this),this.intoPool()},Studio.createPool(splosionME);var Game=new Studio.Scene({y:0,x:0,width:1*stage.width,height:1*stage.height,onActivate:function(t){},gravity:.5,build:function(t){this.color.style="rgba(225,225,225,.4)",this.color.r=1,this.color.g=1,this.color.b=1,this.color.a=.4;var o=function(t,o){this.velocityX=t,this.velocityY=o};o.prototype=new Studio.SpriteAnimation({borderlap:1,border:stage,width:4,height:4,x:32,y:-2,image:sheet_64,rect:{x:0,y:0,width:4,height:4},loop:sheet_motion.ball,fps:12,velocityX:1,velocityY:1}),o.prototype.onEnterFrame=function(){this.x+=this.velocityX,this.y+=this.velocityY,this.x>stage.width&&(this.x=0),this.x<0&&(this.x=stage.width),this.y>stage.height&&(Game.addChild(splosion.fromPool({x:this.x,y:60})),this.y=0,this.velocityX=1.5-3*Math.random()),this.hitTestRect(faller)&&(faller.velocityY*=-1,faller.velocityX=this.velocityX,Game.addChild(splosionME.fromPool({x:faller.x,y:faller.y,velocityX:faller.velocityX,velocityY:faller.velocityY})),this.y=0,this.velocityX=1.5-3*Math.random())},faller=new Studio.SpriteAnimation({width:8,height:8,x:16,y:16,image:sheet_64,rect:{x:0,y:0,width:8,height:8},loop:sheet_motion.fallguy,fps:15,borderlap:1,border:stage,jumping:!1}),this.addChild(new o(0,3)),this.addChild(new o(2,2)),this.addChild(new o(1,-2)),this.addChild(new o(-1,3)),this.addChild(faller),this.addChild(new cloud(5,5,1)),this.addChild(new cloud(45,15,1)),makePhysicObject(faller,this),stage.logic=function t(){stage.gamepadInput(faller)}}});stage.bitmap.style.imageRendering="pixelated",stage.enableKeyboardInput(),stage.enableTouchEvents(),Game.addControl=function(t,o){var e=stage.keys.onScreen[t];o.addChild(e),e.keydown=function(){this.color=Studio.BLUE},e.keyup=function(){this.color=Studio.RED},e.onTap=function(){stage.keys[t]=1,this.keydown()},e.onRelease=e.onReleaseOutside=function(){stage.keys[t]=0,this.keyup()},o.addButton(e)},stage.keys.onScreen[38]=new Studio.Rect({width:10,height:10,color:Studio.RED,x:5,y:5}),Game.addControl(38,Game),stage.keys.onScreen[37]=new Studio.Rect({width:10,height:10,color:Studio.RED,x:40,y:5}),Game.addControl(37,Game),stage.keys.onScreen[39]=new Studio.Rect({width:10,height:10,color:Studio.RED,x:51,y:5}),Game.addControl(39,Game),stage.gamepadInput=function(t,o){this.keys[38]&&(t.jumping||(t.velocityY=-6,t.jumping=!0)),this.keys[37]&&(t.velocityX-=.51,t.loop=sheet_motion.walkleft),this.keys[40],this.keys[39]&&(t.velocityX+=.51,t.loop=sheet_motion.walkright),t.velocityY<0?t.loop=sheet_motion.fallguy:t.velocityX>1||t.velocityX<-1||(t.loop=sheet_motion.stand,t.fps=6)};